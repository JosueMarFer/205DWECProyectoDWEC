<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>E1</title>
    </head>
    <body>
        <script>
            var reinicio = false;
            var numeroRandom, numero, contador, acertado, fallado;
            var contadorPartidas = 0;
            do {
                numeroRandom = parseInt(Math.random() * 100 + 1);
                contador = 0;
                acertado = false;
                fallado = false;

                while ((fallado == false) & (acertado == false) & (contador < 5)) {
                    do {
                        numero = prompt("Introduce el numero");
                        if (numero == null) {
                            fallado = true;
                            break;
                        } else {
                            while (
                                    isNaN(numero) ||
                                    numero.length <= 0 ||
                                    numero == undefined
                                    ) {
                                alert("No es un numero");
                                numero = prompt("Introduce el numero");
                                if (numero == null) {
                                    fallado = true;
                                    break;
                                }
                            }
                        }
                        if ((numero > 100) | (numero <= 0)) {
                            alert("El numero debe de estar comprendido entre 1 y 100");
                        }
                    } while (numero > 100 || numero <= 0);
                    if (fallado == false) {
                        numero = parseInt(numero);
                        if (numero != numeroRandom) {
                            if (numero < numeroRandom) {
                                alert("El numero es mayor que el introducido");
                            } else {
                                alert("El numero es menor que el introducido");
                            }
                        } else {
                            acertado = true;
                        }
                        contador++;
                    }
                }
                contadorPartidas++;
                if (acertado == true) {
                    alert("Numero acertado");
                    document.write(
                            contadorPartidas +
                            ". " +
                            "Juego terminado: SI" +
                            "<br>" +
                            "&nbsp &nbsp Numero de intentos: " +
                            contador +
                            "<br>" +
                            "&nbsp &nbsp Numero acertado: SI" +
                            "<br><br><br>"
                            );
                    reinicio = confirm("¿Volver a jugar?");
                } else {
                    if (fallado == false) {
                        alert("No se ha acertado el numero");
                        document.write(
                                contadorPartidas +
                                ". " +
                                "Juego terminado: SI" +
                                "<br>" +
                                "&nbsp &nbsp Numero de intentos: " +
                                contador +
                                "<br>" +
                                "&nbsp &nbsp Numero acertado: NO" +
                                "<br><br><br>"
                                );
                        reinicio = confirm("¿Volver a jugar?");
                    } else {
                        alert("Se ha cancelado el juego");
                        document.write(
                                contadorPartidas +
                                ". " +
                                "Juego terminado: NO" +
                                "<br>" +
                                "&nbsp &nbsp Numero de intentos: " +
                                contador +
                                "<br>" +
                                "&nbsp &nbsp Numero acertado: NO"
                                );
                        reinicio = false;
                    }
                }
            } while (reinicio == true);
        </script>
    </body>
</html>
